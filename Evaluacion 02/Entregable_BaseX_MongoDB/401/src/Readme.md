<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Posible estructura de la base de datos Mongo</div><div class="admonitionContent_BuS1"><p>A modo de ayuda y posible idea, sería conveniente crear tres colecciones:</p><ul>
<li><code>Usuarios</code>: almacena la información personal de cada usuario.</li>
<li><code>Carrito</code>: contiene la lista de videojuegos que el usuario ha seleccionado para comprar.</li>
<li><code>Compras</code>: son los videojuegos que el usuario ha comprado.</li>
</ul><p><a href="/assets/files/ejemploMongo-61cbf9669f50939bdd96013354f07de9.json" target="_blank">Aquí</a> tenéis un ejemplo de posible estructura. Aunque lo haya puesto en un solo fichero es recomendable gestionarlo en tres colecciones independientes aun así, cada uno puede implementarlo como prefiera.</p><p>Echadle un vistazo a la <a href="/docs/unidades/04/contenidos/mongo/estructura-documento">sección sobre las estructuras de los documentos</a> en donde se habla de las diferentes formas de enlazar colecciones en MongoDB.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tareas-a-realizar">Tareas a realizar<a href="#tareas-a-realizar" class="hash-link" aria-label="Enlace directo al Tareas a realizar" title="Enlace directo al Tareas a realizar">​</a></h2>
<p>Se pide implementar un menú que permita realizar las siguientes operaciones sobre la base de datos BaseX y MongoDB. Una posible estructura de menú puede ser la siguiente:</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CONSULTAS BASE DE DATOS XML</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1. DESCRIPCIÓN DE LA OPERACIÓN 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2. DESCRIPCIÓN DE LA OPERACIÓN 2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    7. DESCRIPCIÓN DE LA OPERACIÓN 7.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONSULTAS BASE DE DATOS MONGODB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8. DESCRIPCIÓN DE LA OPERACIÓN 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    17. DESCRIPCIÓN DE LA OPERACIÓN 17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copiar código" title="Copiar" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>En cuanto a las operaciones que se deberán realizar, serán las siguientes:</p>
<p><strong>Sobre la base de datos XML</strong> se pide:</p>
<ol>
<li>Modificar el valor de un elemento de un XML según un ID.</li>
<li>Eliminar un <code>videojuego</code> según su ID.</li>
<li>Consulta 1: Obtener todos los videojuegos ordenados por plataforma y en segundo lugar por título (se mostrarán los siguientes campos: <code>id</code>, <code>titulo</code>, <code>precio</code>, <code>disponibilidad</code>, <code>edad_minima_recomendada</code> y <code>plataforma</code>).</li>
<li>Consulta 2: Listar videojuegos con una edad_minima_recomendada menor o igual a <em>X</em> años (se mostrarán los siguientes campos: <code>id</code>, <code>titulo</code>, <code>precio</code>, <code>disponibilidad</code>, <code>edad_minima_recomendada</code> y <code>plataforma</code>). Se deberá mostrar la información ordenada según la <code>edad_minima_recomendada</code>.</li>
<li>Consulta 3: Mostrar la <code>plataforma</code>, el <code>titulo</code> y el <code>precio</code> del videojuego más barato para cada <code>plataforma</code>. En el caso de haber varios se devolverá el de la primera posición.</li>
<li>Consulta 4: Mostrar el <code>titulo</code> y el <code>genero</code> de aquellos videojuegos cuya <code>descripcion</code> incluya una subcadena, independientemente del uso de mayúsculas o minúsculas. Se deberá mostrar la información ordenada alfabéticamente según el <code>genero</code>.</li>
<li>Consulta 5: Mostrar la cantidad total de videojuegos para cada <code>plataforma</code> (teniendo en cuenta el elemento <code>disponibilidad</code>) y calcular el porcentaje que representa respecto al total de videojuegos. Se deberá mostrar la información ordenada de forma descendente por la cantidad de videojuegos.</li>
<li>Consulta 6: Mostrar el precio que costaría comprar todos los videojuegos disponibles (teniendo en cuenta el <code>precio</code> de cada videojuego y la <code>disponibilidad</code> de cada uno).</li>
</ol>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Nota sobre las consultas anteriores</div><div class="admonitionContent_BuS1"><p>Todas las consultas anteriores tienen una consulta XQuery que permite obtener el resultado de forma directa</p></div></div>
<p><strong>Sobre la base de datos MongoDB</strong> se pide:</p>
<ol start="9">
<li>Crear un nuevo usuario (no podrá haber <code>email</code> repetidos).</li>
<li>Identificar usuario según el <code>email</code>. Dado el <code>email</code> se obtendrá el <code>id</code> del usuario de forma que las siguientes consultas se harán sobre ese usuario. Para cambiar de usuario se tendrá que volver a seleccionar esta opción.</li>
<li>Borrar un usuario.</li>
<li>Modificar el valor de un campo de la información del usuario.</li>
<li>Añadir videojuegos al carrito del usuario. Se mostrará la lista de videojuegos cuya <code>edad_minima_recomendada</code> sea inferior o igual a la del usuario actual y se pedirá: <code>id</code> del videojuego y <code>cantidad</code>, así como si se desea seguir introduciendo más videojuegos.</li>
<li>Mostrar el carrito del usuario. Se mostrarán los datos del carrito y el coste total.</li>
<li>Comprar el carrito del usuario. Se mostrará el contenido del carrito junto con una orden de confirmación. Si la orden es positiva se pasarán todos los videojuegos a formar parte de una nueva compra y desaparecerán del carrito.</li>
<li>Mostrar las compras del usuario, incluyendo la información de la fecha de cada compra.</li>
<li>Consulta 1: Teniendo en cuenta todos los usuarios, calcular el coste de cada carrito y listar los resultados ordenados por el total de forma descendente.</li>
<li>Consulta 2: Teniendo en cuenta todos los usuarios, calcular el total gastado por cada usuario en todas sus compras y listar los resultados ordenados por el total de forma ascendente.</li>
</ol>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Nota sobre los apartados anteriores</div><div class="admonitionContent_BuS1"><p>Para la realización de los <strong>apartados 16, 17 y 18</strong>:</p><ul>
<li>Si se ha diseñado la BD con una única colección existe una consulta en MongoDB que permite obtener el resultado de forma directa.</li>
<li>Si se ha diseñado la BD utilizando varias colecciones se puede usar Java para obtener los datos de una colección para añadirlos a la consulta de la otra colección. Pero no para formatear o calcular los datos finales.</li>
</ul></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Página del documento"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/unidades/04/actividades/puntuacion"><div class="pagination-nav__sublabel">Anterior</div><div class="pagination-nav__label">Puntuación</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/unidades/04/anexos/ejercicios-xpath/401"><div class="pagination-nav__sublabel">Siguiente</div><div class="pagination-nav__label">401</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#descripción-del-proyecto" class="table-of-contents__link toc-highlight">Descripción del proyecto</a></li><li><a href="#tareas-a-realizar" class="table-of-contents__link toc-highlight">Tareas a realizar</a></li></ul></div></div></div></div></main></div></div></div></div>